<!doctype html><html lang=en><head><title>Setting up linux using ansible ::
Kgosi — cloud & devops</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="image: https://unsplash.com/@ngeshlew
 Automation is all the rage nowadays with concepts like infrastructure as code being very popular in all parts of computing, and since my setup hasnt changed much in years i decided it would benefit me to automate it so that the next time i need to reinstall i would not have to install and set up everything by hand.I had already hosted my dotfiles on git and used those in my previous installs, but this time i wanted to automate the installation of the applications as well not just their settings."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://modisek.github.io/posts/ansible-dev-laptop/><link rel=stylesheet href=https://modisek.github.io/assets/style.css><link rel=stylesheet href=https://modisek.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://modisek.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://modisek.github.io/img/favicon.png><link href=https://modisek.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://modisek.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://modisek.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://modisek.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://modisek.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://modisek.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up linux using ansible"><meta name=twitter:description content="image: https://unsplash.com/@ngeshlew
 Automation is all the rage nowadays with concepts like infrastructure as code being very popular in all parts of computing, and since my setup hasnt changed much in years i decided it would benefit me to automate it so that the next time i need to reinstall i would not have to install and set up everything by hand.I had already hosted my dotfiles on git and used those in my previous installs, but this time i wanted to automate the installation of the applications as well not just their settings."><meta property="og:title" content="Setting up linux using ansible"><meta property="og:description" content="image: https://unsplash.com/@ngeshlew
 Automation is all the rage nowadays with concepts like infrastructure as code being very popular in all parts of computing, and since my setup hasnt changed much in years i decided it would benefit me to automate it so that the next time i need to reinstall i would not have to install and set up everything by hand.I had already hosted my dotfiles on git and used those in my previous installs, but this time i wanted to automate the installation of the applications as well not just their settings."><meta property="og:type" content="article"><meta property="og:url" content="https://modisek.github.io/posts/ansible-dev-laptop/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-27T18:13:27+02:00"><meta property="article:modified_time" content="2021-11-27T18:13:27+02:00"><meta property="og:site_name" content="Kgosi"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/about class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>kgosi</span>
<span class=logo__cursor></span></a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/posts>blog</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/posts>blog</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Setting up linux using ansible</h1><div class=post-meta><span class=post-date>2021-11-27</span></div><figure class=post-cover><img src=https://modisek.github.io/imgs/code.jpg alt="Setting up linux using ansible"></figure><div class=post-content><blockquote><p>image: <a href=https://unsplash.com/@ngeshlew>https://unsplash.com/@ngeshlew</a></p></blockquote><p>Automation is all the rage nowadays with concepts like infrastructure as code being very popular in all parts of computing, and since my setup hasnt changed much in years i decided it would benefit me to automate it so that the next time i need to reinstall i would not have to install and set up everything by hand.I had already hosted my dotfiles on git and used those in my previous installs, but this time i wanted to automate the installation of the applications as well not just their settings.</p><p>This is part of a series i am doing on my linux setup</p><ol><li><a href=https://modisek.github.io/posts/my-linux-dev-setup/>my linux setup(overview)</a></li><li><blockquote><p><a href=#>setting up linux using ansible</a>*</p></blockquote></li></ol><h4 id=prerequisites>prerequisites</h4><ul><li>You need to have ansible installed</li><li>Some modules are dependent on your distribution eg. for your package manager, am using xbps since i am on void linux, and this is not a tutorial for ansible.</li></ul><h4 id=ansible>Ansible</h4><ul><li><p>set up ssh
I used ansible vault to encrypt ssh key and will move it to the new system</p></li><li><p>install apps
Install all the application i will need in the new system, since am using void linux am using the xbps module, xbps being the package manager of void linux.</p></li></ul><pre><code> - name: install essesntials
  become: true
  xbps: name={{item}}
  with_items:
    - xorg-minimal
    - cwm
    ...
</code></pre><ul><li>set up git
Set up my git email and username</li></ul><pre><code>- name: set up email(git)
  git_config:
    name: user.email
    scope: global
    value: &quot;user@example.com&quot;

- name: set up username(git)
  git_config:
    name: user.name
    scope: global
    value: &quot;John Doe&quot;
</code></pre><ul><li>apply the dotfiles
use stow to symlink my dotfiles</li></ul><pre><code>
- name: install stow
  xbps: name=stow

- name: clone dotfiles
  ansible.builtin.git:
    repo: 'git@github.com:modisek/dotfiles.git'
    dest: &quot;{{ lookup('env', 'HOME')}}/.dotfiles&quot;
    recursive: yes
    update: yes
    accept_hostkey: yes
    version: master

- name: stow the files
  shell: cd $HOME/dotfiles/setup.sh

</code></pre><ul><li>start services
Start services, in void linux services are enable by symlinks</li></ul><pre><code>- name: Starting services
  become: yes
  file:
    src: &quot;/etc/sv/{{item}}&quot;
    dest: &quot;/var/service/{{item}}&quot;
    state: link
  with_items:
    - iwd
    - dbus
    - openntpd
    - sshd
    - tlp
    - ufw
    - zramen
    ...

</code></pre><h4 id=summary>summary</h4><p>With this setup and can be up and running in a short amount of time if i needed to reinstall, this also has the advantage that its self documenting and i know exactly how i have set up my system.</p><p>Below is the repository for the scripts:
<a href=https://github.com/modisek/ansible>repository</a></p></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user"><p>Copyright © 2021 Kgosietsile Modise</p></div></div></footer><script src=https://modisek.github.io/assets/main.js></script><script src=https://modisek.github.io/assets/prism.js></script></div></body></html>